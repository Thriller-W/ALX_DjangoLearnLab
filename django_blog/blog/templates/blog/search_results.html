<!-- blog/templates/blog/search_results.html -->
{% extends "base.html" %}
{% block content %}
<h1>Search Results</h1>

<form method="get" action="{% url 'blog:post_search' %}" style="margin-bottom: 1rem;">
  <input type="text" name="q" placeholder="Search posts..." value="{{ query }}">
  <button type="submit">Search</button>
</form>

{% if query %}
  <p>Showing results for: <strong>{{ query }}</strong></p>
{% endif %}

{% for post in posts %}
  <article style="margin-bottom: 1.5rem;">
    <h2><a href="{% url 'blog:post_detail' post.pk %}">{{ post.title }}</a></h2>
    <p>{{ post.content|truncatewords:40 }}</p>
    {% if post.tags.all %}
      <p>Tags:
        {% for tag in post.tags.all %}
          <a href="{% url 'blog:posts_by_tag' tag.slug %}">#{{ tag.name }}</a>{% if not forloop.last %}, {% endif %}
        {% endfor %}
      </p>
    {% endif %}
  </article>
{% empty %}
  {% if query %}
    <p>No matches found.</p>
  {% else %}
    <p>Type something to search.</p>
  {% endif %}
{% endfor %}

<p><a href="{% url 'blog:post_list' %}">Back to all posts</a></p>
{% endblock %}
